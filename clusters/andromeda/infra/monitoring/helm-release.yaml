apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: kube-prometheus-stack
  namespace: monitoring
spec:
  values:
    grafana:
      ingress:
        hosts:
        - grafana.andromeda.local
        - grafana.andromeda.jayadeep.me 
        tls:
        - secretName: grafana-cert
          hosts:
          - grafana.andromeda.local
          - grafana.andromeda.jayadeep.me 
    prometheus:
      ingress:
        hosts:
        - prometheus.andromeda.local
        - prometheus.andromeda.jayadeep.me 
        tls:
        - secretName: prometheus-cert
          hosts:
          - prometheus.andromeda.local
          - prometheus.andromeda.jayadeep.me 
      prometheusSpec:
        additionalScrapeConfigs:
        - job_name: nuc
          static_configs:
          - targets:
            - 192.168.0.50:9100 ## Node exporter from nuc
            - 192.168.0.50:18080 ## taskwarrior metrics from nuc
    alertmanager:
      ingress:
        hosts:
        - alertmanager.andromeda.local
        - alertmanager.andromeda.jayadeep.me 
        tls:
        - secretName: alertmanager-cert
          hosts:
          - alertmanager.andromeda.local
          - alertmanager.andromeda.jayadeep.me 
      alertmanagerSpec:
        useExistingSecret: true
        configSecret: alertmanager-config
