apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: pihole
  namespace: pihole
spec:
  interval: 5m
  chart:
    spec:
      chart: pihole
      version: '2.5.8'
      sourceRef:
        kind: HelmRepository
        name: mojo2600
        namespace: flux-system
      interval: 1m
  values:
    persistentVolumeClaim:
      enabled: false

    serviceWeb:
      type: LoadBalancer
      annotations:
        metallb.universe.tf/loadBalancerIPs: 192.168.0.101
        metallb.universe.tf/allow-shared-ip: pihole

    serviceDns:
      type: LoadBalancer
      annotations:
        metallb.universe.tf/loadBalancerIPs: 192.168.0.101
        metallb.universe.tf/allow-shared-ip: pihole

    adminPassword: DroaTiNSenDu

    # Use sealed secret later
    admin:
      existingSecret: ""
      passwordKey: "password"

    DNS1: "1.1.1.1"
    DNS2: "1.0.0.1"

    adlists:
    - https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts
    - http://sysctl.org/cameleon/hosts
    - https://s3.amazonaws.com/lists.disconnect.me/simple_tracking.txt
    - https://s3.amazonaws.com/lists.disconnect.me/simple_ad.txt

    dnsmasq:
      customDnsEntries:
      - address=/pihole.local/192.168.0.101
      - address=/andromeda.local/192.168.0.100
